<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Emoji Blast - Home</title>
    <!-- PWA Manifest Link (Install feature ke liye) -->
    <link rel="manifest" href="manifest.json">

    <style>
        body { 
            background: radial-gradient(circle, #1a0033, #000); margin: 0; padding: 0; 
            display: flex; flex-direction: column; align-items: center; 
            justify-content: center; height: 100vh; overflow: hidden; color: white;
            font-family: 'Segoe UI', sans-serif;
        }

        /* 1. Install Button Style (Top par dikhega) */
        #install-ui {
            display: none; position: fixed; top: 20px; width: 100%; text-align: center; z-index: 9999;
        }
        .dl-btn {
            background: gold; color: black; padding: 12px 25px; border: none; 
            border-radius: 30px; font-weight: bold; box-shadow: 0 0 15px gold; cursor: pointer;
        }

        /* 2. Splash Screen (Loading Screen) */
        #splash {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #1a0033; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 1000;
        }
        #splash h1 { color: #00ffff; font-size: 50px; text-shadow: 0 0 20px #00ffff; margin-bottom: 20px; }
        .loader-bar { width: 70%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; }
        .loader-fill { width: 0%; height: 100%; background: #ff007f; transition: width 0.1s; }

        /* 3. Home Menu (Play Button) */
        #menu { text-align: center; display: none; animation: fadeIn 1s; }
        h1.title { font-size: 50px; color: #00ffff; text-shadow: 0 0 20px #00ffff; margin-bottom: 50px; }
        .play-btn {
            background: linear-gradient(90deg, #ff007f, #00ffff);
            padding: 20px 60px; border: none; border-radius: 50px;
            font-size: 30px; font-weight: 900; color: white; cursor: pointer;
            box-shadow: 0 0 20px #ff007f; transition: 0.3s;
        }
        .play-btn:active { transform: scale(0.9); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <!-- Install Button -->
    <div id="install-ui"><button class="dl-btn" onclick="installApp()">üì• DOWNLOAD GAME (APP)</button></div>

    <!-- Splash Screen -->
    <div id="splash">
        <h1>EMOJI BLAST</h1>
        <div class="loader-bar"><div class="loader-fill" id="fill"></div></div>
        <p style="margin-top:10px; letter-spacing: 2px;">LOADING...</p>
    </div>

    <!-- Home Menu Page -->
    <div id="menu">
        <h1 class="title">EMOJI BLAST üç≠</h1>
        <button class="play-btn" onclick="location.href='game.html'">PLAY NOW</button>
        <p style="margin-top: 30px; color: #aaa;">Made with ‚ù§Ô∏è by Anubhav</p>
    </div>

    <script>
        const fill = document.getElementById('fill');
        const splash = document.getElementById('splash');
        const menu = document.getElementById('menu');
        const installUI = document.getElementById('install-ui');
        let deferredPrompt;

        // 1. Install Logic (PWA) [1.3]
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installUI.style.display = 'block'; // Button dikhao
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choice) => {
                    if (choice.outcome === 'accepted') installUI.style.display = 'none';
                    deferredPrompt = null;
                });
            }
        }

        // 2. Loading Animation Logic [1.2]
        let progress = 0;
        let loadInterval = setInterval(() => {
            progress += Math.random() * 10;
            fill.style.width = progress + "%";
            if (progress >= 100) {
                clearInterval(loadInterval);
                splash.style.opacity = "0";
                setTimeout(() => {
                    splash.style.display = "none";
                    menu.style.display = "block"; // Home Menu dikhao
                }, 1000);
            }
        }, 150);

        // 3. Service Worker Register (Offline support ke liye) [1.1]
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
