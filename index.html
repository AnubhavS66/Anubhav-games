            if (targetId !== draggedId) {
                let color1 = squares[draggedId].style.backgroundColor;
                let color2 = squares[targetId].style.backgroundColor;
                squares[draggedId].style.backgroundColor = color2;
                squares[targetId].style.backgroundColor = color1;
                checkMatches();
            }
        }

        function checkMatches() {
            let hasMatch = false;
            // Rows
            for (let i = 0; i < 62; i++) {
                let rowOfThree = [i, i+1, i+2];
                let color = squares[i].style.backgroundColor;
                if (i % 8 < 6 && rowOfThree.every(idx => squares[idx].style.backgroundColor === color)) {
                    score += 10;
                    hasMatch = true;
                    rowOfThree.forEach(idx => squares[idx].style.backgroundColor = candyColors[Math.floor(Math.random() * candyColors.length)]);
                }
            }
            // Columns
            for (let i = 0; i < 48; i++) {
                let colOfThree = [i, i+width, i+width*2];
                let color = squares[i].style.backgroundColor;
                if (colOfThree.every(idx => squares[idx].style.backgroundColor === color)) {
                    score += 10;
                    hasMatch = true;
                    colOfThree.forEach(idx => squares[idx].style.backgroundColor = candyColors[Math.floor(Math.random() * candyColors.length)]);
                }
            }
            if (hasMatch) {
                scoreDisplay.innerText = score;
                msg.style.display = 'block';
                setTimeout(() => msg.style.display = 'none', 600);
            }
        }

        createBoard();
    </script>
</body>
</html>
              
