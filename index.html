<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Bhai Ka Candy Crush</title>
    <style>
        /* Full Mobile Background like Photo */
        body { 
            background: linear-gradient(180deg, #ff99cc 0%, #ffccff 50%, #cc99ff 100%);
            margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; 
            height: 100vh; font-family: 'Arial Rounded MT Bold', sans-serif; overflow: hidden; touch-action: none;
        }

        /* Top Score Panel like Photo */
        .top-bar {
            width: 90%; background: #ff66b2; margin-top: 40px; padding: 15px;
            border-radius: 30px; border: 4px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex; justify-content: space-around; align-items: center; z-index: 10;
        }
        .stat-box { text-align: center; color: white; }
        .stat-label { font-size: 14px; font-weight: bold; }
        #score { font-size: 28px; font-weight: 900; color: #fff; }

        /* Game Grid in Center */
        .grid { 
            display: grid; grid-template-columns: repeat(8, 1fr); 
            width: 92vw; height: 92vw; max-width: 380px; max-height: 380px;
            gap: 4px; background: rgba(255,255,255,0.3); padding: 8px; 
            border-radius: 20px; border: 5px solid #fff; position: relative;
            margin-top: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .candy { 
            width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;
            font-size: 28px; transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        #message { 
            position: absolute; pointer-events: none; font-size: 60px; font-weight: 900;
            color: #fff; text-shadow: 0 0 20px #ff007f; display: none; z-index: 100;
            animation: pop 0.6s ease-out;
        }
        @keyframes pop { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1.2); opacity: 1; } }
    </style>
</head>
<body>

    <!-- Professional Top Bar -->
    <div class="top-bar">
        <div class="stat-box">
            <div class="stat-label">LEVEL</div>
            <div style="font-size: 24px; font-weight: 900;">125</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">SCORE</div>
            <span id="score">0</span>
        </div>
    </div>

    <div id="message">GOOD! ‚ú®</div>

    <!-- Game Grid -->
    <div class="grid" id="grid"></div>

    <script>
        const grid = document.getElementById('grid');
        const scoreDisplay = document.getElementById('score');
        const msg = document.getElementById('message');
        const width = 8;
        // Cool Emojis like Candy colors
        const candyEmojis = ['üç¨', 'üç≠', 'üçì', 'üçã', 'üçá', 'üçí'];

        let squares = [];
        let score = 0;

        function createBoard() {
            grid.innerHTML = ''; squares = [];
            for (let i = 0; i < width * width; i++) {
                const square = document.createElement('div');
                square.className = 'candy';
                square.setAttribute('id', i);
                square.innerHTML = candyEmojis[Math.floor(Math.random() * candyEmojis.length)];
                grid.appendChild(square);
                squares.push(square);
                square.addEventListener('touchstart', tStart);
                square.addEventListener('touchend', tEnd);
            }
        }

        let sX, sY, dId;
        function tStart(e) { 
            dId = parseInt(this.id); 
            sX = e.touches.clientX; 
            sY = e.touches.clientY; 
            this.style.transform = "scale(0.8)";
        }

        function tEnd(e) {
            this.style.transform = "scale(1)";
            let eX = e.changedTouches.clientX, eY = e.changedTouches.clientY;
            let dX = eX - sX, dY = eY - sY, tId = dId;

            if (Math.abs(dX) > Math.abs(dY)) {
                if (dX > 40 && dId % 8 !== 7) tId = dId + 1;
                else if (dX < -40 && dId % 8 !== 0) tId = dId - 1;
            } else {
                if (dY > 40 && dId + 8 < 64) tId = dId + 8;
                else if (dY < -30 && dId - 8 >= 0) tId = dId - 8;
            }

            if (tId !== dId) {
                let temp = squares[dId].innerHTML;
                squares[dId].innerHTML = squares[tId].innerHTML;
                squares[tId].innerHTML = temp;
                setTimeout(checkMatches, 150);
            }
        }

        function checkMatches() {
            let found = false;
            for (let i = 0; i < 64; i++) {
                let r3 = [i, i+1, i+2], c3 = [i, i+8, i+16];
                let current = squares[i].innerHTML;
                
                if (i % 8 < 6 && r3.every(idx => squares[idx] && squares[idx].innerHTML === current)) {
                    score += 50; found = true;
                    r3.forEach(idx => squares[idx].innerHTML = candyEmojis[Math.floor(Math.random()*6)]);
                }
                if (i < 48 && c3.every(idx => squares[idx] && squares[idx].innerHTML === current)) {
                    score += 50; found = true;
                    c3.forEach(idx => squares[idx].innerHTML = candyEmojis[Math.floor(Math.random()*6)]);
                }
            }
            if (found) {
                scoreDisplay.innerText = score;
                msg.style.display = 'block';
                setTimeout(() => { msg.style.display = 'none'; checkMatches(); }, 600);
            }
        }
        createBoard();
    </script>
</body>
</html>
